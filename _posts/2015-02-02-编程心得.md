---
layout:     post
title:      "编程心得"
subtitle:   "一点感悟"
date:       2015-02-02 12:00:00
author:     "Fonzie"
categories: 心得
header-img: "img/post-bg-06.jpg"
---

# 一些编程心得，打造KISS项目

### 一、 训练编程直觉，每次都把代码写好，写了千万次，那么就能够不需要思考，一边写代码应付新增需求，一边重构保持代码的整体结构。训练自己写出简短的代码


把平时的代码写好，写干净，多阅读优秀的项目架构，那么开发的时候，自然就会不断地进行重构，得到漂亮的架构。你很难说清楚为什么要这么写，但这么写就是好，而且逻辑清晰，符合语义。就像绘画大师一样，画画就是好看，但也很难说清楚为什么每个动作，每个因素的变化，都会有不同的行为，如此多的细节，很难全部都说出来。我们写程序也是要看着各种因素的变化，随着需求、性能指标、历史包袱、人员分工因素等等的不同，会重构出不同的代码。而不是机械地跟着教条走，新手才这么做。在你不断地漂亮地、快速地完成需求，自信心也随之而来，正反馈不断循环。


### 二、 坚持单点整理，把真理自动推导到系统每一处，从而没有重复

如同几何一样，我们可以定义最基础的变量，推论出一系列的有用的推理。这需要不懈的努力才能做到，其中一个编程中给力的工具就是元编程。它能够把这些变量推导到系统的每一处。比如你定义了一系列xml数据格式，那么每添加一份xml就不应该写具体的parser以及定义结构体，应该能够做到在业务中直接使用这些数据，parser过程自动化。比如UI拖了一个按钮，那么业务也不用写一行xx = getButton("xx")，而是应该直接用，获取按钮的过程自动化。比如定义了网络协议，那么封包的过程自动化。比如美术给了新的图片，应该命名与策划定义id一致，程序只管按照约定读取，不用知道有新的图片，而不是配置一份文件。把所有的中间环节砍掉，代码量、工作量都会少很多，因为这些工作往往复复，会乘很多倍，在时间上积累起来一定是个数字，最糟糕的是对人员的心情影响。

### 三、 放弃面向xx编程，写代码最重要是遵循语义，能让人读懂

先把一个观点放在这里，强类型语言的面向对象都几乎是不完整的，指着他们说面向对象不行就像指着太监说天下的男人不行。真正能玩耍面向对象的语言应该是动态语言，鸭子类型让我们不需要折腾继承这套玩法来进行多态。继承应该只用来复用，而不是做多态。面向对象是好东西，它带来的变化如同过去结构化编程一样：取消goto语句，用顺序、循环、分支替代，从而让代码统一易读。而面向对象正是对数据的结构化编程，让数据更加抽象，让大家操作数据的时候不用关心数据有什么字段，而且对象的思路也能帮助我们进行抽象，提升代码抽象层次，而且还让我们更容易进行思考。因为大部分人一次只能驾驭9~5个左右的概念，所以对于复杂问题，抽象是很有必要的，不进行抽象是难以解决的。也就引入一句计算机科学界中的大招--“增加层次去解决问题”。

### 四、 要去理解业务，业务理解深刻了，那么逻辑自然就清晰了

在一些领域，业务知识有比较高的门槛，比如游戏引擎。因为游戏引擎是来自游戏，而不是先有引擎再有游戏。特别是游戏框架，也是对你写过大量游戏的共性提炼。知道游戏中这样处理数据会方便策划、程序协作，知道怎样处理UI来方便美术、程序合作，知道怎么做，才能够支持线上调试，哪些客户端出了问题，怎么解决。再举个例子，新手引导，通常会有多个步骤，每个步骤都是一些行为，而这些行为可能要求做数据分析记录（统计留存等等）。比如战斗逻辑，技能怎么组织等等，这些最起码都要做过一遍。说个题外话，我始终认为视频游戏的业务不应该采用强类型语言，lua是个非常完美的选择。

### 五、 提前构建好，胜于等待需求冲击。一些东西确实需要提前想清楚。比如热更新的支持、性能指标、数据结构、用户怎么使用你的接口。有些东西易放难收

有人说，我写代码都是等待需求去冲刷，所以代码很丑，留着也没关系。对此，我不是十分认同。对于业务相关的逻辑可以这么做，但是对于对策划不可见或者不可知的灰色部分，必须程序员自己去抓。比如你用了C++就很难做动态更新。比如项目中扩散着各种性能不佳的代码，想在后面再收，那就很痛苦了。

### 六、 一个好的框架，最起码有一个让业务逻辑清晰简单的意识，尽量让用户的每一行代码都应该在解决业务问题，而且还能让业务问题简化。扎实的基本功体现在框架上，要在性能、易用性、开发效率等等重要性质中取一个权衡。

比如之前写的为静态数据写解析程序就不是业务逻辑，可以在框架层面砍掉。比如网络协议逻辑也不是业务逻辑，由框架提供。更细致一点，对于技能的实现，冷却、吟唱这些都不用实现具体某个技能的人去关心。新手引导增加新的引导方式，不需要关心引导系统中的步骤以及数据分析等等。

### 七、 提升自己的视野，不要局限自己为程序员，不要仅仅写代码，作为程序员要加强学习能力来面对变化，胜负往往在代码之外

一个项目，事在人为，不同人做出来就是不一样。

### 八、 上面的都是错的

这不是跟风大神，就像之前写的，细节太多了，你总能找到反例的情况。如果要每种情况都对，那就上面都应该写鸡汤废话。